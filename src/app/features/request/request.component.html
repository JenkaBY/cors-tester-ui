<form [formGroup]="requestForm" (ngSubmit)="onSubmit()">
  <div class="form-group">
    <label for="url">URL</label>
    <input
      type="text"
      id="url"
      formControlName="url"
      placeholder="https://api.example.com/endpoint"
    />
  </div>

  <div class="form-group">
    <label for="method">HTTP Method</label>
    <select id="method" formControlName="method">
      @for (method of httpMethods; track method) {
        <option [value]="method">{{ method }}</option>
      }
    </select>
  </div>

  <div class="form-group">
    <label for="headers">Headers (one per line, format: Key: Value)</label>
    <textarea
      id="headers"
      formControlName="headers"
      placeholder="Content-Type: application/json&#10;Authorization: Bearer token"
      rows="2"  
    >Content-Type: application/json</textarea>
  </div>

  <div class="form-group">
    <label for="body">Request Body (JSON)</label>
    <textarea
      id="body"
      formControlName="body"
      placeholder="{ &#10;  &quot;key&quot;: &quot;value&quot;&#10;}"
    ></textarea>
  </div>

  <button type="submit" [disabled]="!requestForm.valid || loading">
    {{ loading ? 'Sending...' : 'Send Request' }}
  </button>
</form>

@if (error) {
  <div class="error">
    {{ error }}
  </div>
}

@if (response) {
  <div class="response">
    <div class="response-section">
      <h3>Status</h3>
      <div class="status" [class.success]="response.status < 400" [class.error]="response.status >= 400">
        {{ response.status }} {{ response.statusText }}
      </div>
    </div>

    <div class="response-section">
      <h3>Response Headers</h3>
      <pre>{{ response.headers | json }}</pre>
    </div>

    <div class="response-section">
      <h3>Response Body</h3>
      <pre>{{ response.body | json }}</pre>
    </div>
  </div>
}